<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>page2</title>
		<script src="http://cdn.jsdelivr.net/bluebird/3.5.0/bluebird.min.js"></script>
	</head>
	<body>

		<!-- clock -->
		<p><span id="clock"></span> milliseconds since January 1970</p>
		<script>

			setInterval(function() {
				var d = new Date();
				document.getElementById("clock").innerHTML = d + "<br>" + d.getTime();
			}, 100); // Update 10 times a second

		</script>

		<!-- spin -->
		<p><button onclick="spin6()">6. bluebird</button> <span id="result6"></span></p>
		<script>

			function spin6() {
				var count = 0;
				var start = Date.now();
				f();
				function f() {
					count++;
					if (Date.now() < start + 1000) Promise.resolve().then(f);
					else document.getElementById("result6").innerHTML = count;
				}
			}

		</script>

	</body>
</html>